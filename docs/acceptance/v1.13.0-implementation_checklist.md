# v1.13.0 Implementation Checklist — CloudPedagogy Course Engine

**Release:** v1.13.0  
**Status:** Implementation planning (binding scope guide)  
**Audience:** Maintainer / reviewer  
**Related artefacts:**
- `docs/acceptance/v1.13.0-acceptance_criteria.md`
- `docs/design/v1.13.0-design.md`
- `docs/design/v1.13.0-absence-signals.md`

---

## 0. Purpose and guardrail

This checklist translates v1.13 design intent and acceptance criteria into a **precise, low-risk implementation plan**.

Rules:
- Follow acceptance criteria over convenience.
- Prefer additive, isolated changes.
- If a step feels “clever”, stop.

---

## 1. Confirm schema-derived evidence paths (DONE)

Based on review of `src/course_engine/schema.py`, the following canonical paths are confirmed
for v1.13 absence signalling:

- Design intent root:  
  - `course.yml:design_intent`

- AI positioning within design intent:  
  - `course.yml:design_intent.ai_position`

- Framework alignment declaration:  
  - `course.yml:framework_alignment`

- Capability mapping declaration:  
  - `course.yml:capability_mapping`

No new schema fields are required for v1.13.
This satisfies AC-INTENT-001 and avoids schema churn.

---

## 2. Allowed change zones (explicit)

v1.13 code changes MUST be confined to the following areas:

### 2.1 Signal modelling and computation
- `src/course_engine/model.py`  
  - add a lightweight `Signal` model (dataclass or Pydantic)
- OR new minimal module:
  - `src/course_engine/utils/signals.py`

### 2.2 Manifest recording
- `src/course_engine/utils/manifest.py`  
  - store computed signals in `manifest.json`

### 2.3 Explain surface
- `src/course_engine/explain/course.py`  
- `src/course_engine/explain/artefact.py`  

Explain MUST surface a stable `signals` array (empty if none).

---

## 3. No-touch zones (non-negotiable)

The following MUST NOT be modified in v1.13:

- `src/course_engine/generator/`
- `src/course_engine/exporters/`
- `/templates/`
- `/scripts/`
- `/demo/` content
- lesson rendering or content semantics

Violation of this section blocks release.

---

## 4. Implementation steps (ordered, minimal)

### Step 1 — Introduce the Signal model
- [ ] Define `Signal` with required + optional fields per design artefact
- [ ] Enforce allowed severities (`info`, `warning`)
- [ ] No scoring, no compliance fields

### Step 2 — Implement signal computation
- [ ] Implement a single deterministic function:
  - `compute_signals(course_spec) -> list[Signal]`
- [ ] Initial signal set (v1.13 only):
  - `SIG-INTENT-001`
  - `SIG-MAP-001`
  - `SIG-MAP-002`
  - `SIG-AI-001`
- [ ] Use schema-confirmed evidence paths only

### Step 3 — Record signals in manifest
- [ ] Extend manifest structure to include `signals`
- [ ] Persist signals at build/render time
- [ ] Do not retroactively modify existing manifests

### Step 4 — Surface signals in explain
- [ ] `explain --json` always emits `signals` key
- [ ] If manifest exists, read signals from manifest
- [ ] If no manifest exists, compute signals on demand
- [ ] Explain remains read-only

---

## 5. Acceptance-criteria verification checklist

### Explain contract
- [ ] AC-EXPLAIN-001: JSON shape additive only
- [ ] AC-EXPLAIN-002: deterministic output
- [ ] AC-EXPLAIN-003: no side effects

### Signals
- [ ] AC-SIGNAL-001: signals are structured objects
- [ ] AC-SIGNAL-002: non-blocking by default
- [ ] AC-SIGNAL-003: schema stable and documented
- [ ] AC-SIGNAL-004: visible in explain

### Manifest
- [ ] AC-MANIFEST-001: signals recorded
- [ ] AC-MANIFEST-002: historical integrity preserved

### Intent + policy
- [ ] AC-INTENT-001–003 respected
- [ ] AC-POLICY-001–002 respected

---

## 6. Required tests to add

### Contract tests
- [ ] `signals` key always present in explain JSON
- [ ] Empty signals emits `signals: []`

### Determinism tests
- [ ] Same input → identical signals (order + content)

### Behaviour tests
- [ ] Signals do not affect exit codes by default
- [ ] Policies do not escalate signals unless explicitly configured

---

## 7. Release gate (hard stop)

v1.13 may be released ONLY if:

- All checklist items above are complete
- No-touch zones were respected
- Acceptance criteria are fully satisfied
- Output remains boring, predictable, and defensible

If uncertain, delay the release.

End of implementation checklist.
