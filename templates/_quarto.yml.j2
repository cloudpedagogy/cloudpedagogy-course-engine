project:
  type: website

website:
  title: "{{ spec.title }}"
  navbar:
    left:
      - href: index.qmd
        text: Home
      - href: lessons/index.qmd
        text: Lessons

  sidebar:
    style: "docked"
    search: true
{% if nav.flat_lessons and (nav.flat_lessons|length > 0) %}
    contents:
{% for m in nav.modules %}
{% set lessons = (nav.flat_lessons | selectattr("module_id", "equalto", m.id) | list) %}
{% if lessons|length > 0 %}
      - section: "{{ m.title }}"
        contents:
{% for item in lessons %}
          - href: "{{ item.href }}"
            {# v1.7: use label+title when available; fallback for older builds #}
            text: "{{ item.lesson_nav_title if item.lesson_nav_title is defined else item.lesson_title }}"
{% endfor %}
{% endif %}
{% endfor %}
{% endif %}

format:
  html:
    theme: {{ spec.theme or "cosmo" }}
    toc: {{ "true" if spec.toc else "false" }}

# Optional: if Quarto ever errors on this, remove the line entirely.
lang: {{ "en" if spec.language.startswith("en") else spec.language }}
